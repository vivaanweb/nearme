!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-starrating",["exports","@angular/core","@angular/forms","@angular/common","rxjs"],e):e((t=t||self)["ng-starrating"]={},t.ng.core,t.ng.forms,t.ng.common,t.rxjs)}(this,function(t,e,n,o,r){"use strict";function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,a=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)s.push(o.value)}catch(i){r={error:i}}finally{try{o&&!o.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}return s}var s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"lib-rating",template:"\n    <p>\n      rating works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),i=function(){function t(){var t=this;this.stars=[],this._readOnly=!1,this._totalStars=5,this.rate=new e.EventEmitter,this.onStarsCountChange||(this.onStarsCountChange=new r.Subject,this.onStarsCountChange.subscribe(function(){t.setStars(),t.generateRating(!0),t.applySizeAllStars(),t.applyColorStyleAllStars(!1),t.addRemoveEvents()})),this.onValueChange||(this.onValueChange=new r.Subject,this.onValueChange.subscribe(function(){t.generateRating(),t.applySizeAllStars()})),this.onCheckedColorChange||(this.onCheckedColorChange=new r.Subject,this.onCheckedColorChange.subscribe(function(){t.applyColorStyleAllStars(!0)})),this.onUnCheckedColorChange||(this.onUnCheckedColorChange=new r.Subject,this.onUnCheckedColorChange.subscribe(function(){t.applyColorStyleAllStars(!1)})),this.onSizeChange||(this.onSizeChange=new r.Subject,this.onSizeChange.subscribe(function(){t.applySizeAllStars()})),this.onReadOnlyChange||(this.onReadOnlyChange=new r.Subject,this.onReadOnlyChange.subscribe(function(){t.addRemoveEvents()}))}return Object.defineProperty(t.prototype,"checkedcolor",{get:function(){return this._checkedColor},set:function(t){this._checkedColor=t,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uncheckedcolor",{get:function(){return this._unCheckedColor},set:function(t){this._unCheckedColor=t,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){(t=t&&null!=t?t:0)>this.stars.length&&(t=this.stars.length),this._value=t,this._value>=0&&this.onValueChange.next(this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size.concat(this._size.includes("px")?"":"px")},set:function(t){t=t&&null!=t&&"0px"!=t?t:"24px",this._size=t,this.onSizeChange.next(this._size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return"true"===String(this._readOnly)},set:function(t){this._readOnly=t,this.onReadOnlyChange.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalstars",{get:function(){return this._totalStars},set:function(t){this._totalStars=t<=0?5:t,this.onStarsCountChange.next(Number(t))},enumerable:!0,configurable:!0}),t.prototype.makeEditable=function(){var t=this;this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(e){e.addEventListener("click",t.onRate.bind(t)),e.addEventListener("mouseenter",t.onStar.bind(t)),e.style.cursor="pointer",e.title=e.dataset.index})},t.prototype.makeReadOnly=function(){this.mainElement.nativeElement.__zone_symbol__mouseleavefalse=null,this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(t){t.__zone_symbol__clickfalse=null,t.__zone_symbol__mouseenterfalse=null,t.style.cursor="default",t.title=""})},t.prototype.addRemoveEvents=function(){this.readonly?this.makeReadOnly():(this.makeEditable(),this.onValueChange.next(this.value))},t.prototype.ngAfterViewInit=function(){},t.prototype.onRate=function(t){var e=t.srcElement,n=this.value;this.value=parseInt(e.dataset.index),0==this.value&&(this.value=1);var o={oldValue:n,newValue:this.value,starRating:this};this.rate.emit(o)},t.prototype.onStar=function(t){for(var e=t.srcElement,n=parseInt(e.dataset.index),o=0;o<n;o++)this.stars[o].className="",this.addDefaultClass(this.stars[o]),this.addCheckedStarClass(this.stars[o]);for(o=n;o<this.stars.length;o++)this.stars[o].className="",this.addDefaultClass(this.stars[o])},t.prototype.offStar=function(t){this.generateRating()},t.prototype.addDefaultClass=function(e){e.classList.add(t.CLS_DEFAULT_STAR)},t.prototype.addCheckedStarClass=function(e){e.classList.add(t.CLS_CHECKED_STAR)},t.prototype.addHalfStarClass=function(e){e.classList.add(t.CLS_HALF_STAR)},t.prototype.setStars=function(){var t=this,e=this.mainElement.nativeElement,n=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}(Array(Number(this.totalstars)).keys());this.stars.length=0,e.innerHTML="",n.forEach(function(n){var o=document.createElement("span");o.dataset.index=(n+1).toString(),o.title=o.dataset.index,e.appendChild(o),t.stars.push(o)})},t.prototype.applySizeAllStars=function(){var e=this;this._size&&(0==this.stars.length&&this.setStars(),this.stars.forEach(function(n){var o=e.size.match(/\d+/)[0],r=10*parseInt(o)/24,a=0-20*parseInt(o)/24;n.style.setProperty(t.VAR_SIZE,e.size),n.classList.contains(t.CLS_HALF_STAR)&&(n.style.setProperty(t.VAR_HALF_WIDTH,r+"px"),n.style.setProperty(t.VAR_HALF_MARGIN,a+"px"))}))},t.prototype.applyColorStyleAllStars=function(t){var e=this;0==this.stars.length&&this.setStars(),this.stars.forEach(function(n){t?e.applyCheckedColorStyle(n):e.applyUnCheckedColorStyle(n)})},t.prototype.applyColorStyle=function(t){this.applyCheckedColorStyle(t),this.applyUnCheckedColorStyle(t)},t.prototype.applyCheckedColorStyle=function(e){e.style.setProperty(t.VAR_CHECKED_COLOR,this.checkedcolor)},t.prototype.applyUnCheckedColorStyle=function(e){e.style.setProperty(t.VAR_UNCHECKED_COLOR,this.uncheckedcolor)},t.prototype.generateRating=function(t){var e=this;if(void 0===t&&(t=!1),(!this.readonly||t)&&(0==this.stars.length&&this.setStars(),this.value>=0)){this.mainElement.nativeElement.title=this.value;var n=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),o=1;this.stars.forEach(function(t){t.className="",e.applyColorStyle(t),e.addDefaultClass(t),e.value>=o?e.addCheckedStarClass(t):n&&(e.addHalfStarClass(t),n=!1),o++})}},t.VAR_CHECKED_COLOR="--checkedColor",t.VAR_UNCHECKED_COLOR="--unCheckedColor",t.VAR_SIZE="--size",t.VAR_HALF_WIDTH="--halfWidth",t.VAR_HALF_MARGIN="--halfMargin",t.CLS_CHECKED_STAR="on",t.CLS_DEFAULT_STAR="star",t.CLS_HALF_STAR="half",t.INP_CHECKED_COLOR="checkedcolor",t.INP_UNCHECKED_COLOR="uncheckedcolor",t.INP_VALUE="value",t.INP_SIZE="size",t.INP_READONLY="readonly",t.INP_TOTALSTARS="totalstars",t.decorators=[{type:e.Component,args:[{selector:"star-rating",template:"<div #starMain>\r\n</div>",encapsulation:e.ViewEncapsulation.None,styles:[":root{--checkedColor:gold;--unCheckedColor:gray;--size:24px;--halfWidth:10px;--halfMargin:-20px}.star{cursor:pointer;color:var(--unCheckedColor);font-size:var(--size);width:var(--size);display:inline-block}.star:last-child{margin-right:0}.star:before{content:'\\2605'}.star.on{color:var(--checkedColor)}.star.half:after{content:'\\2605';color:var(--checkedColor);position:absolute;margin-left:var(--halfMargin);width:var(--halfWidth);overflow:hidden}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={mainElement:[{type:e.ViewChild,args:["starMain",{"static":!0}]}],rate:[{type:e.Output}],checkedcolor:[{type:e.Input,args:[t.INP_CHECKED_COLOR]}],uncheckedcolor:[{type:e.Input,args:[t.INP_UNCHECKED_COLOR]}],value:[{type:e.Input,args:[t.INP_VALUE]}],size:[{type:e.Input,args:[t.INP_SIZE]}],readonly:[{type:e.Input,args:[t.INP_READONLY]}],totalstars:[{type:e.Input,args:[t.INP_TOTALSTARS]}]},t}(),l=function(){function t(){}return t.prototype.ngDoBootstrap=function(){},t.decorators=[{type:e.NgModule,args:[{imports:[n.FormsModule,o.CommonModule],declarations:[s,i],exports:[i],entryComponents:[i]}]}],t}();t.RatingModule=l,t.StarRatingComponent=i,t.Éµa=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-starrating.umd.min.js.map