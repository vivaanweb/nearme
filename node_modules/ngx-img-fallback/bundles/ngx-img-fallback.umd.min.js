!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-img-fallback",["exports","@angular/core"],t):t((e=e||self)["ngx-img-fallback"]={},e.ng.core)}(this,function(e,t){"use strict";function n(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function r(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var i=function(){function e(e,n){this.el=e,this.renderer=n,this.loaded=new t.EventEmitter,this.isApplied=!1,this.ERROR_EVENT_TYPE="error",this.LOAD_EVENT_TYPE="load",this.nativeElement=e.nativeElement,this.onError=this.onError.bind(this),this.onLoad=this.onLoad.bind(this),this.addEvents()}return e.prototype.ngOnDestroy=function(){this.removeErrorEvent(),this.removeOnLoadEvent()},e.prototype.onError=function(){this.nativeElement.getAttribute("src")!==this.imgSrc?(this.isApplied=!0,this.renderer.setAttribute(this.nativeElement,"src",this.imgSrc)):this.removeOnLoadEvent()},e.prototype.onLoad=function(){this.loaded.emit(this.isApplied)},e.prototype.removeErrorEvent=function(){this.cancelOnError&&this.cancelOnError()},e.prototype.removeOnLoadEvent=function(){this.cancelOnLoad&&this.cancelOnLoad()},e.prototype.addEvents=function(){this.cancelOnError=this.renderer.listen(this.nativeElement,this.ERROR_EVENT_TYPE,this.onError),this.cancelOnLoad=this.renderer.listen(this.nativeElement,this.LOAD_EVENT_TYPE,this.onLoad)},n([t.Input("src-fallback"),r("design:type",String)],e.prototype,"imgSrc",void 0),n([t.Output("loaded"),r("design:type",Object)],e.prototype,"loaded",void 0),e=n([t.Directive({selector:"[src-fallback]"}),r("design:paramtypes",[t.ElementRef,t.Renderer2])],e)}(),o=function(){function e(){}return e=n([t.NgModule({declarations:[i],exports:[i]})],e)}();e.ImgFallbackDirective=i,e.ImgFallbackModule=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-img-fallback.umd.min.js.map