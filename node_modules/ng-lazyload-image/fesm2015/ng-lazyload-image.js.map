{"version":3,"file":"ng-lazyload-image.js.map","sources":["ng://ng-lazyload-image/src/util/css.util.ts","ng://ng-lazyload-image/src/util/util.ts","ng://ng-lazyload-image/src/shared-preset/preset.ts","ng://ng-lazyload-image/src/scroll-preset/rect.ts","ng://ng-lazyload-image/src/scroll-preset/scroll-listener.ts","ng://ng-lazyload-image/src/scroll-preset/preset.ts","ng://ng-lazyload-image/src/hooks-factory.ts","ng://ng-lazyload-image/src/lazyload-image.ts","ng://ng-lazyload-image/src/lazyload-image.directive.ts","ng://ng-lazyload-image/src/lazyload-image.module.ts","ng://ng-lazyload-image/src/intersection-observer-preset/intersection-listener.ts","ng://ng-lazyload-image/src/intersection-observer-preset/preset.ts"],"sourcesContent":["export const cssClassNames = {\n    loaded: 'ng-lazyloaded',\n    loading: 'ng-lazyloading',\n    failed: 'ng-failed-lazyloaded',\n};\n\nexport function removeCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    element.className = element.className.replace(cssClassName, '');\n}\n\nexport function addCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    if (!element.className.includes(cssClassName)) {\n        element.className += ` ${cssClassName}`;\n    }\n}\n\nexport function hasCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    return element.className && element.className.includes(cssClassName);\n}\n","export function isWindowDefined() {\n  return typeof window !== 'undefined';\n}\n\nexport function isChildOfPicture(element: HTMLImageElement | HTMLDivElement): boolean {\n  return Boolean(element.parentElement && element.parentElement.nodeName.toLowerCase() === 'picture');\n}\n\nexport function isImageElement(element: HTMLImageElement | HTMLDivElement): element is HTMLImageElement {\n  return element.nodeName.toLowerCase() === 'img';\n}\n\nexport function setImage(element: HTMLImageElement | HTMLDivElement, imagePath: string, useSrcset: boolean) {\n  if (isImageElement(element)) {\n    if (useSrcset) {\n      element.srcset = imagePath;\n    } else {\n      element.src = imagePath;\n    }\n  } else {\n    element.style.backgroundImage = `url('${imagePath}')`;\n  }\n  return element;\n}\n\nfunction setSources(attrName: string) {\n  return (image: HTMLImageElement) => {\n    const sources = image.parentElement.getElementsByTagName('source');\n    for (let i = 0; i < sources.length; i++) {\n      const attrValue = sources[i].getAttribute(attrName);\n      if (attrValue) {\n        sources[i].srcset = attrValue;\n      }\n    }\n  };\n}\n\nconst setSourcesToDefault = setSources('defaultImage');\nexport const setSourcesToLazy = setSources('lazyLoad');\nconst setSourcesToError = setSources('errorImage');\n\nfunction setImageAndSources(setSourcesFn: (image: HTMLImageElement) => void) {\n  return (element: HTMLImageElement | HTMLDivElement, imagePath: string, useSrcset: boolean) => {\n    if (isImageElement(element) && isChildOfPicture(element)) {\n      setSourcesFn(element);\n    }\n    if (imagePath) {\n      setImage(element, imagePath, useSrcset);\n    }\n  };\n}\n\nexport const setImageAndSourcesToDefault = setImageAndSources(setSourcesToDefault);\nexport const setImageAndSourcesToLazy = setImageAndSources(setSourcesToLazy);\nexport const setImageAndSourcesToError = setImageAndSources(setSourcesToError);\n","import { Observable } from 'rxjs';\nimport {\n  cssClassNames,\n  hasCssClassName,\n  removeCssClassName,\n  addCssClassName,\n  isImageElement,\n  isChildOfPicture,\n  setSourcesToLazy,\n  setImage,\n  setImageAndSourcesToError,\n  setImageAndSourcesToLazy,\n  setImageAndSourcesToDefault,\n} from '../util';\nimport {\n  FinallyFn,\n  LoadImageFn,\n  SetErrorImageFn,\n  SetLoadedImageFn,\n  SetupFn\n} from '../types';\n\nconst end: FinallyFn = ({ element }) => addCssClassName(element, cssClassNames.loaded);\n\nexport const loadImage: LoadImageFn = ({ element, useSrcset, imagePath }) => {\n  let img: HTMLImageElement;\n  if (isImageElement(element) && isChildOfPicture(element)) {\n    const parentClone = element.parentNode.cloneNode(true) as HTMLPictureElement;\n    img = parentClone.getElementsByTagName('img')[0];\n    setSourcesToLazy(img);\n    setImage(img, imagePath, useSrcset);\n  } else {\n    img = new Image();\n    if (isImageElement(element) && element.sizes) {\n      img.sizes = element.sizes;\n    }\n    if (useSrcset) {\n      img.srcset = imagePath;\n    } else {\n      img.src = imagePath;\n    }\n  }\n\n  return Observable.create(observer => {\n    img.onload = () => {\n      observer.next(imagePath);\n      observer.complete();\n    };\n    img.onerror = err => {\n      observer.error(null);\n    };\n  });\n};\n\nconst setErrorImage: SetErrorImageFn = ({ element, errorImagePath, useSrcset }) => {\n  setImageAndSourcesToError(element, errorImagePath, useSrcset);\n  addCssClassName(element, cssClassNames.failed);\n};\n\nconst setLoadedImage: SetLoadedImageFn = ({ element, imagePath, useSrcset }) => {\n  setImageAndSourcesToLazy(element, imagePath, useSrcset);\n};\n\nconst setup: SetupFn = ({ element, defaultImagePath, useSrcset }) => {\n  setImageAndSourcesToDefault(element, defaultImagePath, useSrcset);\n\n  if (hasCssClassName(element, cssClassNames.loaded)) {\n    removeCssClassName(element, cssClassNames.loaded);\n  }\n};\n\nexport const sharedPreset = {\n  finally: end,\n  loadImage,\n  setErrorImage,\n  setLoadedImage,\n  setup\n};\n","export class Rect {\n  static empty: Rect = new Rect(0, 0, 0, 0);\n\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n\n  constructor(left: number, top: number, right: number, bottom: number) {\n    this.left = left;\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n  }\n\n  static fromElement(element: HTMLElement): Rect {\n    const { left, top, right, bottom } = element.getBoundingClientRect();\n\n    if (left === 0 && top === 0 && right === 0 && bottom === 0) {\n      return Rect.empty;\n    } else {\n      return new Rect(left, top, right, bottom);\n    }\n  }\n\n  static fromWindow(_window: Window): Rect {\n    return new Rect(0, 0, _window.innerWidth, _window.innerHeight);\n  }\n\n  inflate(inflateBy: number) {\n    this.left -= inflateBy;\n    this.top -= inflateBy;\n    this.right += inflateBy;\n    this.bottom += inflateBy;\n  }\n\n  intersectsWith(rect: Rect): boolean {\n    return rect.left < this.right && this.left < rect.right && rect.top < this.bottom && this.top < rect.bottom;\n  }\n\n  getIntersectionWith(rect: Rect): Rect {\n    const left = Math.max(this.left, rect.left);\n    const top = Math.max(this.top, rect.top);\n    const right = Math.min(this.right, rect.right);\n    const bottom = Math.min(this.bottom, rect.bottom);\n\n    if (right >= left && bottom >= top) {\n      return new Rect(left, top, right, bottom);\n    } else {\n      return Rect.empty;\n    }\n  }\n}\n","import { empty, Observable } from 'rxjs';\nimport { sampleTime, share, startWith } from 'rxjs/operators';\nimport { isWindowDefined } from '../util';\n\nconst scrollListeners = new WeakMap<any, Observable<any>>();\n\nexport function sampleObservable(obs: Observable<any>, scheduler?: any) {\n  return obs.pipe(\n    sampleTime(100, scheduler),\n    share(),\n    startWith('')\n  );\n}\n\n// Only create one scroll listener per target and share the observable.\n// Typical, there will only be one observable per application\nexport const getScrollListener = (scrollTarget): Observable<Event | String> => {\n  if (!scrollTarget || typeof scrollTarget.addEventListener !== 'function') {\n    if (isWindowDefined()) {\n      console.warn('`addEventListener` on ' + scrollTarget + ' (scrollTarget) is not a function. Skipping this target');\n    }\n    return empty();\n  }\n  if (scrollListeners.has(scrollTarget)) {\n    return scrollListeners.get(scrollTarget);\n  }\n\n  const srollEvent = Observable.create(observer => {\n    const eventName = 'scroll';\n    const handler = event => observer.next(event);\n    const options = { passive: true, capture: false };\n    scrollTarget.addEventListener(eventName, handler, options);\n    return () => scrollTarget.removeEventListener(eventName, handler, options);\n  });\n\n  const listener = sampleObservable(srollEvent);\n  scrollListeners.set(scrollTarget, listener);\n  return listener;\n};\n","import { startWith } from 'rxjs/operators';\nimport { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { isWindowDefined } from '../util';\nimport { Rect } from './rect';\nimport { getScrollListener } from './scroll-listener';\n\nexport const isVisible: IsVisibleFn<Event> = ({ element, offset, scrollContainer }, getWindow = () => window) => {\n  const elementBounds = Rect.fromElement(element);\n  if (elementBounds === Rect.empty) {\n    return false;\n  }\n  const windowBounds = Rect.fromWindow(getWindow());\n  elementBounds.inflate(offset);\n\n  if (scrollContainer) {\n    const scrollContainerBounds = Rect.fromElement(scrollContainer);\n    const intersection = scrollContainerBounds.getIntersectionWith(windowBounds);\n    return elementBounds.intersectsWith(intersection);\n  } else {\n    return elementBounds.intersectsWith(windowBounds);\n  }\n};\n\nconst getObservable: GetObservableFn<Event | String> = (attributes: Attributes) => {\n  if (attributes.scrollObservable) {\n    return attributes.scrollObservable.pipe(startWith(''));\n  }\n  if (attributes.scrollContainer) {\n    return getScrollListener(attributes.scrollContainer);\n  }\n  return getScrollListener(isWindowDefined() ? window : undefined);\n};\n\nexport const scrollPreset: HookSet<Event | String> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n","import { scrollPreset } from './scroll-preset';\nimport { HookSet, ModuleOptions } from './types';\n\nexport function cretateHooks<E>(options?: ModuleOptions<E>): HookSet<any> {\n    if (!options) {\n        return scrollPreset;\n    }\n    const hooks = {};\n    if (options.preset) {\n        Object.assign(hooks, options.preset);\n    } else {\n        Object.assign(hooks, scrollPreset);\n    }\n    Object.keys(options)\n        .filter(key => key !== 'preset')\n        .forEach(key => {\n            hooks[key] = options[key];\n        });\n    return hooks as HookSet<any>;\n}\n","import { Observable, of } from 'rxjs';\nimport { catchError, filter, map, mergeMap, take, tap } from 'rxjs/operators';\nimport { Attributes, HookSet } from './types';\n\nexport function lazyLoadImage<E>(hookSet: HookSet<E>, attributes: Attributes) {\n  return (scrollObservable: Observable<E>) => {\n    return scrollObservable.pipe(\n      filter(event =>\n        hookSet.isVisible({\n          element: attributes.element,\n          event: event,\n          offset: attributes.offset,\n          scrollContainer: attributes.scrollContainer\n        })\n      ),\n      take(1),\n      mergeMap(() => hookSet.loadImage(attributes)),\n      tap(imagePath =>\n        hookSet.setLoadedImage({\n          element: attributes.element,\n          imagePath,\n          useSrcset: attributes.useSrcset\n        })\n      ),\n      map(() => true),\n      catchError(() => {\n        hookSet.setErrorImage(attributes);\n        return of(false);\n      }),\n      tap(() => hookSet.finally(attributes))\n    );\n  };\n}\n","import {\n    AfterContentInit,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Optional,\n    Output\n} from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { switchMap, tap } from 'rxjs/operators';\nimport { cretateHooks } from './hooks-factory';\nimport { lazyLoadImage } from './lazyload-image';\nimport { Attributes, HookSet, ModuleOptions } from './types';\nimport { isWindowDefined } from './util';\n\n@Directive({\n    selector: '[lazyLoad]'\n})\nexport class LazyLoadImageDirective implements OnChanges, AfterContentInit, OnDestroy {\n  @Input('lazyLoad') lazyImage;   // The image to be lazy loaded\n  @Input() defaultImage: string;  // The image to be displayed before lazyImage is loaded\n  @Input() errorImage: string;    // The image to be displayed if lazyImage load fails\n  @Input() scrollTarget: any;     // Scroll container that contains the image and emits scoll events\n  @Input() scrollObservable;      // Pass your own scroll emitter\n  @Input() offset: number;        // The number of px a image should be loaded before it is in view port\n  @Input() useSrcset: boolean;    // Whether srcset attribute should be used instead of src\n  @Output() onLoad: EventEmitter<boolean> = new EventEmitter(); // Callback when an image is loaded\n  private propertyChanges$: ReplaySubject<Attributes>;\n  private elementRef: ElementRef;\n  private ngZone: NgZone;\n  private scrollSubscription;\n  private hooks: HookSet<any>;\n\n  constructor(el: ElementRef, ngZone: NgZone, @Optional() @Inject('options') options?: ModuleOptions) {\n    this.elementRef = el;\n    this.ngZone = ngZone;\n    this.propertyChanges$ = new ReplaySubject();\n    this.hooks = cretateHooks(options);\n  }\n\n  ngOnChanges() {\n    this.propertyChanges$.next({\n      element: this.elementRef.nativeElement,\n      imagePath: this.lazyImage,\n      defaultImagePath: this.defaultImage,\n      errorImagePath: this.errorImage,\n      useSrcset: this.useSrcset,\n      offset: this.offset | 0,\n      scrollContainer: this.scrollTarget,\n      scrollObservable: this.scrollObservable\n    });\n  }\n\n  ngAfterContentInit() {\n    // Disable lazy load image in server side\n    if (!isWindowDefined()) {\n      return null;\n    }\n\n    this.ngZone.runOutsideAngular(() => {\n      this.scrollSubscription = this.propertyChanges$.pipe(\n        tap(attributes => this.hooks.setup(attributes)),\n        switchMap(attributes => this.hooks.getObservable(attributes).pipe(lazyLoadImage(this.hooks, attributes)))\n      ).subscribe(success => this.onLoad.emit(success));\n    });\n  }\n\n  ngOnDestroy() {\n    [this.scrollSubscription]\n      .filter(subscription => subscription && !subscription.isUnsubscribed)\n      .forEach(subscription => subscription.unsubscribe());\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { LazyLoadImageDirective } from './lazyload-image.directive';\nimport { ModuleOptions } from './types';\n\n@NgModule({\n  declarations: [LazyLoadImageDirective],\n  exports: [LazyLoadImageDirective]\n})\nexport class LazyLoadImageModule {\n  static forRoot(options: ModuleOptions): ModuleWithProviders {\n    return {\n      ngModule: LazyLoadImageModule,\n      providers: [{ provide: 'options', useValue: options }]\n    };\n  }\n}\n","import { empty, Observable, Subject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { Attributes } from '../types';\nimport { isWindowDefined } from '../util';\n\ntype ObserverOptions = {\n  root?: Element;\n  rootMargin?: string;\n};\n\nconst observers = new WeakMap<Element | {}, IntersectionObserver>();\n\nconst intersectionSubject = new Subject<IntersectionObserverEntry>();\n\nfunction loadingCallback(entrys: IntersectionObserverEntry[]) {\n  entrys.forEach(entry => intersectionSubject.next(entry));\n}\n\nexport const getIntersectionObserver = (attributes: Attributes) => {\n  if (!attributes.scrollContainer && !isWindowDefined()) {\n    return empty();\n  }\n\n  const options: ObserverOptions = {\n    root: attributes.scrollContainer\n  };\n  if (attributes.offset) {\n    options.rootMargin = `${attributes.offset}px`;\n  }\n\n  const scrollContainer = attributes.scrollContainer || window;\n\n  let observer = observers.get(scrollContainer);\n\n  if (!observer) {\n    observer = new IntersectionObserver(loadingCallback, options);\n    observers.set(scrollContainer, observer);\n  }\n\n  observer.observe(attributes.element);\n\n  return Observable.create(obs => {\n    const subscription = intersectionSubject.pipe(filter(entry => entry.target === attributes.element)).subscribe(obs);\n    return () => {\n      subscription.unsubscribe();\n      observer.unobserve(attributes.element);\n    };\n  });\n};\n","import { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { getIntersectionObserver } from './intersection-listener';\n\nexport const isVisible: IsVisibleFn<IntersectionObserverEntry> = ({ event }) => {\n  return event.isIntersecting;\n};\n\nexport const getObservable: GetObservableFn<IntersectionObserverEntry> = (attributes: Attributes, _getInterObserver = getIntersectionObserver) => {\n  if (attributes.scrollObservable) {\n    return attributes.scrollObservable;\n  }\n  return _getInterObserver(attributes);\n};\n\nexport const intersectionObserverPreset: HookSet<IntersectionObserverEntry> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n"],"names":["isVisible","getObservable"],"mappings":"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"}
