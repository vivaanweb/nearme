{"version":3,"file":"ng-lazyload-image.umd.js.map","sources":["ng://ng-lazyload-image/src/util/css.util.ts","ng://ng-lazyload-image/src/util/util.ts","ng://ng-lazyload-image/src/shared-preset/preset.ts","ng://ng-lazyload-image/src/scroll-preset/rect.ts","ng://ng-lazyload-image/src/scroll-preset/scroll-listener.ts","ng://ng-lazyload-image/src/scroll-preset/preset.ts","ng://ng-lazyload-image/src/hooks-factory.ts","ng://ng-lazyload-image/src/lazyload-image.ts","ng://ng-lazyload-image/src/lazyload-image.directive.ts","ng://ng-lazyload-image/src/lazyload-image.module.ts","ng://ng-lazyload-image/src/intersection-observer-preset/intersection-listener.ts","ng://ng-lazyload-image/src/intersection-observer-preset/preset.ts"],"sourcesContent":["export const cssClassNames = {\n    loaded: 'ng-lazyloaded',\n    loading: 'ng-lazyloading',\n    failed: 'ng-failed-lazyloaded',\n};\n\nexport function removeCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    element.className = element.className.replace(cssClassName, '');\n}\n\nexport function addCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    if (!element.className.includes(cssClassName)) {\n        element.className += ` ${cssClassName}`;\n    }\n}\n\nexport function hasCssClassName(element: HTMLImageElement | HTMLDivElement, cssClassName: string) {\n    return element.className && element.className.includes(cssClassName);\n}\n","export function isWindowDefined() {\n  return typeof window !== 'undefined';\n}\n\nexport function isChildOfPicture(element: HTMLImageElement | HTMLDivElement): boolean {\n  return Boolean(element.parentElement && element.parentElement.nodeName.toLowerCase() === 'picture');\n}\n\nexport function isImageElement(element: HTMLImageElement | HTMLDivElement): element is HTMLImageElement {\n  return element.nodeName.toLowerCase() === 'img';\n}\n\nexport function setImage(element: HTMLImageElement | HTMLDivElement, imagePath: string, useSrcset: boolean) {\n  if (isImageElement(element)) {\n    if (useSrcset) {\n      element.srcset = imagePath;\n    } else {\n      element.src = imagePath;\n    }\n  } else {\n    element.style.backgroundImage = `url('${imagePath}')`;\n  }\n  return element;\n}\n\nfunction setSources(attrName: string) {\n  return (image: HTMLImageElement) => {\n    const sources = image.parentElement.getElementsByTagName('source');\n    for (let i = 0; i < sources.length; i++) {\n      const attrValue = sources[i].getAttribute(attrName);\n      if (attrValue) {\n        sources[i].srcset = attrValue;\n      }\n    }\n  };\n}\n\nconst setSourcesToDefault = setSources('defaultImage');\nexport const setSourcesToLazy = setSources('lazyLoad');\nconst setSourcesToError = setSources('errorImage');\n\nfunction setImageAndSources(setSourcesFn: (image: HTMLImageElement) => void) {\n  return (element: HTMLImageElement | HTMLDivElement, imagePath: string, useSrcset: boolean) => {\n    if (isImageElement(element) && isChildOfPicture(element)) {\n      setSourcesFn(element);\n    }\n    if (imagePath) {\n      setImage(element, imagePath, useSrcset);\n    }\n  };\n}\n\nexport const setImageAndSourcesToDefault = setImageAndSources(setSourcesToDefault);\nexport const setImageAndSourcesToLazy = setImageAndSources(setSourcesToLazy);\nexport const setImageAndSourcesToError = setImageAndSources(setSourcesToError);\n","import { Observable } from 'rxjs';\nimport {\n  cssClassNames,\n  hasCssClassName,\n  removeCssClassName,\n  addCssClassName,\n  isImageElement,\n  isChildOfPicture,\n  setSourcesToLazy,\n  setImage,\n  setImageAndSourcesToError,\n  setImageAndSourcesToLazy,\n  setImageAndSourcesToDefault,\n} from '../util';\nimport {\n  FinallyFn,\n  LoadImageFn,\n  SetErrorImageFn,\n  SetLoadedImageFn,\n  SetupFn\n} from '../types';\n\nconst end: FinallyFn = ({ element }) => addCssClassName(element, cssClassNames.loaded);\n\nexport const loadImage: LoadImageFn = ({ element, useSrcset, imagePath }) => {\n  let img: HTMLImageElement;\n  if (isImageElement(element) && isChildOfPicture(element)) {\n    const parentClone = element.parentNode.cloneNode(true) as HTMLPictureElement;\n    img = parentClone.getElementsByTagName('img')[0];\n    setSourcesToLazy(img);\n    setImage(img, imagePath, useSrcset);\n  } else {\n    img = new Image();\n    if (isImageElement(element) && element.sizes) {\n      img.sizes = element.sizes;\n    }\n    if (useSrcset) {\n      img.srcset = imagePath;\n    } else {\n      img.src = imagePath;\n    }\n  }\n\n  return Observable.create(observer => {\n    img.onload = () => {\n      observer.next(imagePath);\n      observer.complete();\n    };\n    img.onerror = err => {\n      observer.error(null);\n    };\n  });\n};\n\nconst setErrorImage: SetErrorImageFn = ({ element, errorImagePath, useSrcset }) => {\n  setImageAndSourcesToError(element, errorImagePath, useSrcset);\n  addCssClassName(element, cssClassNames.failed);\n};\n\nconst setLoadedImage: SetLoadedImageFn = ({ element, imagePath, useSrcset }) => {\n  setImageAndSourcesToLazy(element, imagePath, useSrcset);\n};\n\nconst setup: SetupFn = ({ element, defaultImagePath, useSrcset }) => {\n  setImageAndSourcesToDefault(element, defaultImagePath, useSrcset);\n\n  if (hasCssClassName(element, cssClassNames.loaded)) {\n    removeCssClassName(element, cssClassNames.loaded);\n  }\n};\n\nexport const sharedPreset = {\n  finally: end,\n  loadImage,\n  setErrorImage,\n  setLoadedImage,\n  setup\n};\n","export class Rect {\n  static empty: Rect = new Rect(0, 0, 0, 0);\n\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n\n  constructor(left: number, top: number, right: number, bottom: number) {\n    this.left = left;\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n  }\n\n  static fromElement(element: HTMLElement): Rect {\n    const { left, top, right, bottom } = element.getBoundingClientRect();\n\n    if (left === 0 && top === 0 && right === 0 && bottom === 0) {\n      return Rect.empty;\n    } else {\n      return new Rect(left, top, right, bottom);\n    }\n  }\n\n  static fromWindow(_window: Window): Rect {\n    return new Rect(0, 0, _window.innerWidth, _window.innerHeight);\n  }\n\n  inflate(inflateBy: number) {\n    this.left -= inflateBy;\n    this.top -= inflateBy;\n    this.right += inflateBy;\n    this.bottom += inflateBy;\n  }\n\n  intersectsWith(rect: Rect): boolean {\n    return rect.left < this.right && this.left < rect.right && rect.top < this.bottom && this.top < rect.bottom;\n  }\n\n  getIntersectionWith(rect: Rect): Rect {\n    const left = Math.max(this.left, rect.left);\n    const top = Math.max(this.top, rect.top);\n    const right = Math.min(this.right, rect.right);\n    const bottom = Math.min(this.bottom, rect.bottom);\n\n    if (right >= left && bottom >= top) {\n      return new Rect(left, top, right, bottom);\n    } else {\n      return Rect.empty;\n    }\n  }\n}\n","import { empty, Observable } from 'rxjs';\nimport { sampleTime, share, startWith } from 'rxjs/operators';\nimport { isWindowDefined } from '../util';\n\nconst scrollListeners = new WeakMap<any, Observable<any>>();\n\nexport function sampleObservable(obs: Observable<any>, scheduler?: any) {\n  return obs.pipe(\n    sampleTime(100, scheduler),\n    share(),\n    startWith('')\n  );\n}\n\n// Only create one scroll listener per target and share the observable.\n// Typical, there will only be one observable per application\nexport const getScrollListener = (scrollTarget): Observable<Event | String> => {\n  if (!scrollTarget || typeof scrollTarget.addEventListener !== 'function') {\n    if (isWindowDefined()) {\n      console.warn('`addEventListener` on ' + scrollTarget + ' (scrollTarget) is not a function. Skipping this target');\n    }\n    return empty();\n  }\n  if (scrollListeners.has(scrollTarget)) {\n    return scrollListeners.get(scrollTarget);\n  }\n\n  const srollEvent = Observable.create(observer => {\n    const eventName = 'scroll';\n    const handler = event => observer.next(event);\n    const options = { passive: true, capture: false };\n    scrollTarget.addEventListener(eventName, handler, options);\n    return () => scrollTarget.removeEventListener(eventName, handler, options);\n  });\n\n  const listener = sampleObservable(srollEvent);\n  scrollListeners.set(scrollTarget, listener);\n  return listener;\n};\n","import { startWith } from 'rxjs/operators';\nimport { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { isWindowDefined } from '../util';\nimport { Rect } from './rect';\nimport { getScrollListener } from './scroll-listener';\n\nexport const isVisible: IsVisibleFn<Event> = ({ element, offset, scrollContainer }, getWindow = () => window) => {\n  const elementBounds = Rect.fromElement(element);\n  if (elementBounds === Rect.empty) {\n    return false;\n  }\n  const windowBounds = Rect.fromWindow(getWindow());\n  elementBounds.inflate(offset);\n\n  if (scrollContainer) {\n    const scrollContainerBounds = Rect.fromElement(scrollContainer);\n    const intersection = scrollContainerBounds.getIntersectionWith(windowBounds);\n    return elementBounds.intersectsWith(intersection);\n  } else {\n    return elementBounds.intersectsWith(windowBounds);\n  }\n};\n\nconst getObservable: GetObservableFn<Event | String> = (attributes: Attributes) => {\n  if (attributes.scrollObservable) {\n    return attributes.scrollObservable.pipe(startWith(''));\n  }\n  if (attributes.scrollContainer) {\n    return getScrollListener(attributes.scrollContainer);\n  }\n  return getScrollListener(isWindowDefined() ? window : undefined);\n};\n\nexport const scrollPreset: HookSet<Event | String> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n","import { scrollPreset } from './scroll-preset';\nimport { HookSet, ModuleOptions } from './types';\n\nexport function cretateHooks<E>(options?: ModuleOptions<E>): HookSet<any> {\n    if (!options) {\n        return scrollPreset;\n    }\n    const hooks = {};\n    if (options.preset) {\n        Object.assign(hooks, options.preset);\n    } else {\n        Object.assign(hooks, scrollPreset);\n    }\n    Object.keys(options)\n        .filter(key => key !== 'preset')\n        .forEach(key => {\n            hooks[key] = options[key];\n        });\n    return hooks as HookSet<any>;\n}\n","import { Observable, of } from 'rxjs';\nimport { catchError, filter, map, mergeMap, take, tap } from 'rxjs/operators';\nimport { Attributes, HookSet } from './types';\n\nexport function lazyLoadImage<E>(hookSet: HookSet<E>, attributes: Attributes) {\n  return (scrollObservable: Observable<E>) => {\n    return scrollObservable.pipe(\n      filter(event =>\n        hookSet.isVisible({\n          element: attributes.element,\n          event: event,\n          offset: attributes.offset,\n          scrollContainer: attributes.scrollContainer\n        })\n      ),\n      take(1),\n      mergeMap(() => hookSet.loadImage(attributes)),\n      tap(imagePath =>\n        hookSet.setLoadedImage({\n          element: attributes.element,\n          imagePath,\n          useSrcset: attributes.useSrcset\n        })\n      ),\n      map(() => true),\n      catchError(() => {\n        hookSet.setErrorImage(attributes);\n        return of(false);\n      }),\n      tap(() => hookSet.finally(attributes))\n    );\n  };\n}\n","import {\n    AfterContentInit,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Optional,\n    Output\n} from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { switchMap, tap } from 'rxjs/operators';\nimport { cretateHooks } from './hooks-factory';\nimport { lazyLoadImage } from './lazyload-image';\nimport { Attributes, HookSet, ModuleOptions } from './types';\nimport { isWindowDefined } from './util';\n\n@Directive({\n    selector: '[lazyLoad]'\n})\nexport class LazyLoadImageDirective implements OnChanges, AfterContentInit, OnDestroy {\n  @Input('lazyLoad') lazyImage;   // The image to be lazy loaded\n  @Input() defaultImage: string;  // The image to be displayed before lazyImage is loaded\n  @Input() errorImage: string;    // The image to be displayed if lazyImage load fails\n  @Input() scrollTarget: any;     // Scroll container that contains the image and emits scoll events\n  @Input() scrollObservable;      // Pass your own scroll emitter\n  @Input() offset: number;        // The number of px a image should be loaded before it is in view port\n  @Input() useSrcset: boolean;    // Whether srcset attribute should be used instead of src\n  @Output() onLoad: EventEmitter<boolean> = new EventEmitter(); // Callback when an image is loaded\n  private propertyChanges$: ReplaySubject<Attributes>;\n  private elementRef: ElementRef;\n  private ngZone: NgZone;\n  private scrollSubscription;\n  private hooks: HookSet<any>;\n\n  constructor(el: ElementRef, ngZone: NgZone, @Optional() @Inject('options') options?: ModuleOptions) {\n    this.elementRef = el;\n    this.ngZone = ngZone;\n    this.propertyChanges$ = new ReplaySubject();\n    this.hooks = cretateHooks(options);\n  }\n\n  ngOnChanges() {\n    this.propertyChanges$.next({\n      element: this.elementRef.nativeElement,\n      imagePath: this.lazyImage,\n      defaultImagePath: this.defaultImage,\n      errorImagePath: this.errorImage,\n      useSrcset: this.useSrcset,\n      offset: this.offset | 0,\n      scrollContainer: this.scrollTarget,\n      scrollObservable: this.scrollObservable\n    });\n  }\n\n  ngAfterContentInit() {\n    // Disable lazy load image in server side\n    if (!isWindowDefined()) {\n      return null;\n    }\n\n    this.ngZone.runOutsideAngular(() => {\n      this.scrollSubscription = this.propertyChanges$.pipe(\n        tap(attributes => this.hooks.setup(attributes)),\n        switchMap(attributes => this.hooks.getObservable(attributes).pipe(lazyLoadImage(this.hooks, attributes)))\n      ).subscribe(success => this.onLoad.emit(success));\n    });\n  }\n\n  ngOnDestroy() {\n    [this.scrollSubscription]\n      .filter(subscription => subscription && !subscription.isUnsubscribed)\n      .forEach(subscription => subscription.unsubscribe());\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { LazyLoadImageDirective } from './lazyload-image.directive';\nimport { ModuleOptions } from './types';\n\n@NgModule({\n  declarations: [LazyLoadImageDirective],\n  exports: [LazyLoadImageDirective]\n})\nexport class LazyLoadImageModule {\n  static forRoot(options: ModuleOptions): ModuleWithProviders {\n    return {\n      ngModule: LazyLoadImageModule,\n      providers: [{ provide: 'options', useValue: options }]\n    };\n  }\n}\n","import { empty, Observable, Subject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { Attributes } from '../types';\nimport { isWindowDefined } from '../util';\n\ntype ObserverOptions = {\n  root?: Element;\n  rootMargin?: string;\n};\n\nconst observers = new WeakMap<Element | {}, IntersectionObserver>();\n\nconst intersectionSubject = new Subject<IntersectionObserverEntry>();\n\nfunction loadingCallback(entrys: IntersectionObserverEntry[]) {\n  entrys.forEach(entry => intersectionSubject.next(entry));\n}\n\nexport const getIntersectionObserver = (attributes: Attributes) => {\n  if (!attributes.scrollContainer && !isWindowDefined()) {\n    return empty();\n  }\n\n  const options: ObserverOptions = {\n    root: attributes.scrollContainer\n  };\n  if (attributes.offset) {\n    options.rootMargin = `${attributes.offset}px`;\n  }\n\n  const scrollContainer = attributes.scrollContainer || window;\n\n  let observer = observers.get(scrollContainer);\n\n  if (!observer) {\n    observer = new IntersectionObserver(loadingCallback, options);\n    observers.set(scrollContainer, observer);\n  }\n\n  observer.observe(attributes.element);\n\n  return Observable.create(obs => {\n    const subscription = intersectionSubject.pipe(filter(entry => entry.target === attributes.element)).subscribe(obs);\n    return () => {\n      subscription.unsubscribe();\n      observer.unobserve(attributes.element);\n    };\n  });\n};\n","import { sharedPreset } from '../shared-preset/preset';\nimport { Attributes, GetObservableFn, HookSet, IsVisibleFn } from '../types';\nimport { getIntersectionObserver } from './intersection-listener';\n\nexport const isVisible: IsVisibleFn<IntersectionObserverEntry> = ({ event }) => {\n  return event.isIntersecting;\n};\n\nexport const getObservable: GetObservableFn<IntersectionObserverEntry> = (attributes: Attributes, _getInterObserver = getIntersectionObserver) => {\n  if (attributes.scrollObservable) {\n    return attributes.scrollObservable;\n  }\n  return _getInterObserver(attributes);\n};\n\nexport const intersectionObserverPreset: HookSet<IntersectionObserverEntry> = Object.assign({}, sharedPreset, {\n  isVisible,\n  getObservable\n});\n"],"names":["Observable","sampleTime","share","startWith","empty","filter","take","mergeMap","tap","map","catchError","of","EventEmitter","ReplaySubject","switchMap","Directive","ElementRef","NgZone","Optional","Inject","Input","Output","NgModule","Subject","isVisible","getObservable"],"mappings":";;;;;;;;;;AAAA,IAAO,qBAAM,aAAa,GAAG;QACzB,MAAM,EAAE,eAAe;QACvB,OAAO,EAAE,gBAAgB;QACzB,MAAM,EAAE,sBAAsB;KACjC,CAAC;;;;;;AAEF,gCAAmC,OAA0C,EAAE,YAAoB;QAC/F,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;KACnE;;;;;;AAED,6BAAgC,OAA0C,EAAE,YAAoB;QAC5F,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;YAC3C,OAAO,CAAC,SAAS,IAAI,MAAI,YAAc,CAAC;SAC3C;KACJ;;;;;;AAED,6BAAgC,OAA0C,EAAE,YAAoB;QAC5F,OAAO,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;KACxE;;;;;;;;;AClBD;QACE,OAAO,OAAO,MAAM,KAAK,WAAW,CAAC;KACtC;;;;;AAED,8BAAiC,OAA0C;QACzE,OAAO,OAAO,CAAC,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,EAAE,KAAK,SAAS,CAAC,CAAC;KACrG;;;;;AAED,4BAA+B,OAA0C;QACvE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,KAAK,KAAK,CAAC;KACjD;;;;;;;AAED,sBAAyB,OAA0C,EAAE,SAAiB,EAAE,SAAkB;QACxG,IAAI,cAAc,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,SAAS,EAAE;gBACb,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC;aAC5B;iBAAM;gBACL,OAAO,CAAC,GAAG,GAAG,SAAS,CAAC;aACzB;SACF;aAAM;YACL,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,UAAQ,SAAS,OAAI,CAAC;SACvD;QACD,OAAO,OAAO,CAAC;KAChB;;;;;IAED,oBAAoB,QAAgB;QAClC,OAAO,UAAC,KAAuB;YAC7B,qBAAM,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YACnE,KAAK,qBAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,qBAAM,SAAS,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBACpD,IAAI,SAAS,EAAE;oBACb,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;iBAC/B;aACF;SACF,CAAC;KACH;IAED,qBAAM,mBAAmB,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC;AACvD,IAAO,qBAAM,gBAAgB,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC;IACvD,qBAAM,iBAAiB,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;;;;;IAEnD,4BAA4B,YAA+C;QACzE,OAAO,UAAC,OAA0C,EAAE,SAAiB,EAAE,SAAkB;YACvF,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,gBAAgB,CAAC,OAAO,CAAC,EAAE;gBACxD,YAAY,CAAC,OAAO,CAAC,CAAC;aACvB;YACD,IAAI,SAAS,EAAE;gBACb,QAAQ,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;aACzC;SACF,CAAC;KACH;AAED,IAAO,qBAAM,2BAA2B,GAAG,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;AACnF,IAAO,qBAAM,wBAAwB,GAAG,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;AAC7E,IAAO,qBAAM,yBAAyB,GAAG,kBAAkB,CAAC,iBAAiB,CAAC,CAAC;;;;;;;;;;;ACtD/E,IAsBA,qBAAM,GAAG,GAAc,UAAC,EAAW;YAAT,oBAAO;QAAO,OAAA,eAAe,CAAC,OAAO,EAAE,aAAa,CAAC,MAAM,CAAC;IAA9C,CAA8C,CAAC;IAEhF,qBAAM,SAAS,GAAgB,UAAC,EAAiC;YAA/B,oBAAO,EAAE,wBAAS,EAAE,wBAAS;QACpE,qBAAI,GAAqB,CAAC;QAC1B,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,gBAAgB,CAAC,OAAO,CAAC,EAAE;YACxD,qBAAM,WAAW,IAAG,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAuB,CAAA,CAAC;YAC7E,GAAG,GAAG,WAAW,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACjD,gBAAgB,CAAC,GAAG,CAAC,CAAC;YACtB,QAAQ,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;SACrC;aAAM;YACL,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;YAClB,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,KAAK,EAAE;gBAC5C,GAAG,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;aAC3B;YACD,IAAI,SAAS,EAAE;gBACb,GAAG,CAAC,MAAM,GAAG,SAAS,CAAC;aACxB;iBAAM;gBACL,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC;aACrB;SACF;QAED,OAAOA,eAAU,CAAC,MAAM,CAAC,UAAA,QAAQ;YAC/B,GAAG,CAAC,MAAM,GAAG;gBACX,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACzB,QAAQ,CAAC,QAAQ,EAAE,CAAC;aACrB,CAAC;YACF,GAAG,CAAC,OAAO,GAAG,UAAA,GAAG;gBACf,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aACtB,CAAC;SACH,CAAC,CAAC;KACJ,CAAC;IAEF,qBAAM,aAAa,GAAoB,UAAC,EAAsC;YAApC,oBAAO,EAAE,kCAAc,EAAE,wBAAS;QAC1E,yBAAyB,CAAC,OAAO,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;QAC9D,eAAe,CAAC,OAAO,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC;KAChD,CAAC;IAEF,qBAAM,cAAc,GAAqB,UAAC,EAAiC;YAA/B,oBAAO,EAAE,wBAAS,EAAE,wBAAS;QACvE,wBAAwB,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;KACzD,CAAC;IAEF,qBAAM,KAAK,GAAY,UAAC,EAAwC;YAAtC,oBAAO,EAAE,sCAAgB,EAAE,wBAAS;QAC5D,2BAA2B,CAAC,OAAO,EAAE,gBAAgB,EAAE,SAAS,CAAC,CAAC;QAElE,IAAI,eAAe,CAAC,OAAO,EAAE,aAAa,CAAC,MAAM,CAAC,EAAE;YAClD,kBAAkB,CAAC,OAAO,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC;SACnD;KACF,CAAC;IAEK,qBAAM,YAAY,GAAG;QAC1B,OAAO,EAAE,GAAG;QACZ,SAAS,WAAA;QACT,aAAa,eAAA;QACb,cAAc,gBAAA;QACd,KAAK,OAAA;KACN,CAAC;;;;;;;QCrEA,cAAY,IAAY,EAAE,GAAW,EAAE,KAAa,EAAE,MAAc;YAClE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YACf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;SACtB;;;;;QAEM,gBAAW;;;;YAAlB,UAAmB,OAAoB;gBACrC,0CAAQ,cAAI,EAAE,YAAG,EAAE,gBAAK,EAAE,kBAAM,CAAqC;gBAErE,IAAI,IAAI,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,MAAM,KAAK,CAAC,EAAE;oBAC1D,OAAO,IAAI,CAAC,KAAK,CAAC;iBACnB;qBAAM;oBACL,OAAO,IAAI,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;iBAC3C;aACF;;;;;QAEM,eAAU;;;;YAAjB,UAAkB,OAAe;gBAC/B,OAAO,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC;aAChE;;;;;QAED,sBAAO;;;;YAAP,UAAQ,SAAiB;gBACvB,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC;gBACvB,IAAI,CAAC,GAAG,IAAI,SAAS,CAAC;gBACtB,IAAI,CAAC,KAAK,IAAI,SAAS,CAAC;gBACxB,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC;aAC1B;;;;;QAED,6BAAc;;;;YAAd,UAAe,IAAU;gBACvB,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aAC7G;;;;;QAED,kCAAmB;;;;YAAnB,UAAoB,IAAU;gBAC5B,qBAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC5C,qBAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;gBACzC,qBAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC/C,qBAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBAElD,IAAI,KAAK,IAAI,IAAI,IAAI,MAAM,IAAI,GAAG,EAAE;oBAClC,OAAO,IAAI,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;iBAC3C;qBAAM;oBACL,OAAO,IAAI,CAAC,KAAK,CAAC;iBACnB;aACF;qBAlDoB,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;mBAD3C;;;;;;;ACAA,IAIA,qBAAM,eAAe,GAAG,IAAI,OAAO,EAAwB,CAAC;;;;;;AAE5D,8BAAiC,GAAoB,EAAE,SAAe;QACpE,OAAO,GAAG,CAAC,IAAI,CACbC,oBAAU,CAAC,GAAG,EAAE,SAAS,CAAC,EAC1BC,eAAK,EAAE,EACPC,mBAAS,CAAC,EAAE,CAAC,CACd,CAAC;KACH;;;AAID,IAAO,qBAAM,iBAAiB,GAAG,UAAC,YAAY;QAC5C,IAAI,CAAC,YAAY,IAAI,OAAO,YAAY,CAAC,gBAAgB,KAAK,UAAU,EAAE;YACxE,IAAI,eAAe,EAAE,EAAE;gBACrB,OAAO,CAAC,IAAI,CAAC,wBAAwB,GAAG,YAAY,GAAG,yDAAyD,CAAC,CAAC;aACnH;YACD,OAAOC,UAAK,EAAE,CAAC;SAChB;QACD,IAAI,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;YACrC,OAAO,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;SAC1C;QAED,qBAAM,UAAU,GAAGJ,eAAU,CAAC,MAAM,CAAC,UAAA,QAAQ;YAC3C,qBAAM,SAAS,GAAG,QAAQ,CAAC;YAC3B,qBAAM,OAAO,GAAG,UAAA,KAAK,IAAI,OAAA,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAA,CAAC;YAC9C,qBAAM,OAAO,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YAClD,YAAY,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;YAC3D,OAAO,cAAM,OAAA,YAAY,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,GAAA,CAAC;SAC5E,CAAC,CAAC;QAEH,qBAAM,QAAQ,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;QAC9C,eAAe,CAAC,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QAC5C,OAAO,QAAQ,CAAC;KACjB,CAAC;;;;;;ACtCF,IAOO,qBAAM,SAAS,GAAuB,UAAC,EAAoC,EAAE,SAAwB;YAA5D,oBAAO,EAAE,kBAAM,EAAE,oCAAe;QAAI,0BAAA;YAAA,0BAAkB,OAAA,MAAM,GAAA;;QAC1G,qBAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAChD,IAAI,aAAa,KAAK,IAAI,CAAC,KAAK,EAAE;YAChC,OAAO,KAAK,CAAC;SACd;QACD,qBAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC;QAClD,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,eAAe,EAAE;YACnB,qBAAM,qBAAqB,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YAChE,qBAAM,YAAY,GAAG,qBAAqB,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;YAC7E,OAAO,aAAa,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;SACnD;aAAM;YACL,OAAO,aAAa,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;SACnD;KACF,CAAC;IAEF,qBAAM,aAAa,GAAoC,UAAC,UAAsB;QAC5E,IAAI,UAAU,CAAC,gBAAgB,EAAE;YAC/B,OAAO,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAACG,mBAAS,CAAC,EAAE,CAAC,CAAC,CAAC;SACxD;QACD,IAAI,UAAU,CAAC,eAAe,EAAE;YAC9B,OAAO,iBAAiB,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;SACtD;QACD,OAAO,iBAAiB,CAAC,eAAe,EAAE,GAAG,MAAM,GAAG,SAAS,CAAC,CAAC;KAClE,CAAC;yBAEW,YAAY,GAA4B,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE;QACnF,SAAS,WAAA;QACT,aAAa,eAAA;KACd,CAAC;;;;;;;;;;;ACrCF;;;;;AAGA,0BAAgC,OAA0B;QACtD,IAAI,CAAC,OAAO,EAAE;YACV,OAAO,YAAY,CAAC;SACvB;QACD,qBAAM,KAAK,GAAG,EAAE,CAAC;QACjB,IAAI,OAAO,CAAC,MAAM,EAAE;YAChB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;SACxC;aAAM;YACH,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;SACtC;QACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;aACf,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,KAAK,QAAQ,GAAA,CAAC;aAC/B,OAAO,CAAC,UAAA,GAAG;YACR,KAAK,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;SAC7B,CAAC,CAAC;QACP,yBAAO,KAAqB,EAAC;KAChC;;;;;;ACnBD;;;;;;AAIA,2BAAiC,OAAmB,EAAE,UAAsB;QAC1E,OAAO,UAAC,gBAA+B;YACrC,OAAO,gBAAgB,CAAC,IAAI,CAC1BE,gBAAM,CAAC,UAAA,KAAK;gBACV,OAAA,OAAO,CAAC,SAAS,CAAC;oBAChB,OAAO,EAAE,UAAU,CAAC,OAAO;oBAC3B,KAAK,EAAE,KAAK;oBACZ,MAAM,EAAE,UAAU,CAAC,MAAM;oBACzB,eAAe,EAAE,UAAU,CAAC,eAAe;iBAC5C,CAAC;aAAA,CACH,EACDC,cAAI,CAAC,CAAC,CAAC,EACPC,kBAAQ,CAAC,cAAM,OAAA,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,GAAA,CAAC,EAC7CC,aAAG,CAAC,UAAA,SAAS;gBACX,OAAA,OAAO,CAAC,cAAc,CAAC;oBACrB,OAAO,EAAE,UAAU,CAAC,OAAO;oBAC3B,SAAS,WAAA;oBACT,SAAS,EAAE,UAAU,CAAC,SAAS;iBAChC,CAAC;aAAA,CACH,EACDC,aAAG,CAAC,cAAM,OAAA,IAAI,GAAA,CAAC,EACfC,oBAAU,CAAC;gBACT,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;gBAClC,OAAOC,OAAE,CAAC,KAAK,CAAC,CAAC;aAClB,CAAC,EACFH,aAAG,CAAC,cAAM,OAAA,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,GAAA,CAAC,CACvC,CAAC;SACH,CAAC;KACH;;;;;;AChCD;QAsCE,gCAAY,EAAc,EAAE,MAAc,EAAiC;0BAPjC,IAAII,iBAAY,EAAE;YAQ1D,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,gBAAgB,GAAG,IAAIC,kBAAa,EAAE,CAAC;YAC5C,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;SACpC;;;;QAED,4CAAW;;;YAAX;gBACE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;oBACzB,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,aAAa;oBACtC,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,gBAAgB,EAAE,IAAI,CAAC,YAAY;oBACnC,cAAc,EAAE,IAAI,CAAC,UAAU;oBAC/B,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,MAAM,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC;oBACvB,eAAe,EAAE,IAAI,CAAC,YAAY;oBAClC,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;iBACxC,CAAC,CAAC;aACJ;;;;QAED,mDAAkB;;;YAAlB;gBAAA,iBAYC;;gBAVC,IAAI,CAAC,eAAe,EAAE,EAAE;oBACtB,OAAO,IAAI,CAAC;iBACb;gBAED,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,GAAG,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAClDL,aAAG,CAAC,UAAA,UAAU,IAAI,OAAA,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,GAAA,CAAC,EAC/CM,mBAAS,CAAC,UAAA,UAAU,IAAI,OAAA,KAAI,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,GAAA,CAAC,CAC1G,CAAC,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAA,CAAC,CAAC;iBACnD,CAAC,CAAC;aACJ;;;;QAED,4CAAW;;;YAAX;gBACE,CAAC,IAAI,CAAC,kBAAkB,CAAC;qBACtB,MAAM,CAAC,UAAA,YAAY,IAAI,OAAA,YAAY,IAAI,CAAC,YAAY,CAAC,cAAc,GAAA,CAAC;qBACpE,OAAO,CAAC,UAAA,YAAY,IAAI,OAAA,YAAY,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;aACxD;;oBAxDFC,cAAS,SAAC;wBACP,QAAQ,EAAE,YAAY;qBACzB;;;;;wBAnBGC,eAAU;wBAIVC,WAAM;wDA+BqCC,aAAQ,YAAIC,WAAM,SAAC,SAAS;;;;kCAdxEC,UAAK,SAAC,UAAU;qCAChBA,UAAK;mCACLA,UAAK;qCACLA,UAAK;yCACLA,UAAK;+BACLA,UAAK;kCACLA,UAAK;+BACLC,WAAM;;qCA/BT;;;;;;;ACAA;;;;;;;QASS,2BAAO;;;;YAAd,UAAe,OAAsB;gBACnC,OAAO;oBACL,QAAQ,EAAE,mBAAmB;oBAC7B,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC;iBACvD,CAAC;aACH;;oBAVFC,aAAQ,SAAC;wBACR,YAAY,EAAE,CAAC,sBAAsB,CAAC;wBACtC,OAAO,EAAE,CAAC,sBAAsB,CAAC;qBAClC;;kCAPD;;;;;;;ACAA,IAUA,qBAAM,SAAS,GAAG,IAAI,OAAO,EAAsC,CAAC;IAEpE,qBAAM,mBAAmB,GAAG,IAAIC,YAAO,EAA6B,CAAC;;;;;IAErE,yBAAyB,MAAmC;QAC1D,MAAM,CAAC,OAAO,CAAC,UAAA,KAAK,IAAI,OAAA,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAC;KAC1D;AAED,IAAO,qBAAM,uBAAuB,GAAG,UAAC,UAAsB;QAC5D,IAAI,CAAC,UAAU,CAAC,eAAe,IAAI,CAAC,eAAe,EAAE,EAAE;YACrD,OAAOnB,UAAK,EAAE,CAAC;SAChB;QAED,qBAAM,OAAO,GAAoB;YAC/B,IAAI,EAAE,UAAU,CAAC,eAAe;SACjC,CAAC;QACF,IAAI,UAAU,CAAC,MAAM,EAAE;YACrB,OAAO,CAAC,UAAU,GAAM,UAAU,CAAC,MAAM,OAAI,CAAC;SAC/C;QAED,qBAAM,eAAe,GAAG,UAAU,CAAC,eAAe,IAAI,MAAM,CAAC;QAE7D,qBAAI,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAE9C,IAAI,CAAC,QAAQ,EAAE;YACb,QAAQ,GAAG,IAAI,oBAAoB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;YAC9D,SAAS,CAAC,GAAG,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;SAC1C;QAED,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAErC,OAAOJ,eAAU,CAAC,MAAM,CAAC,UAAA,GAAG;YAC1B,qBAAM,YAAY,GAAG,mBAAmB,CAAC,IAAI,CAACK,gBAAM,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,MAAM,KAAK,UAAU,CAAC,OAAO,GAAA,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnH,OAAO;gBACL,YAAY,CAAC,WAAW,EAAE,CAAC;gBAC3B,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;aACxC,CAAC;SACH,CAAC,CAAC;KACJ,CAAC;;;;;;AChDF,IAIO,qBAAMmB,WAAS,GAA2C,UAAC,EAAS;YAAP,gBAAK;QACvE,OAAO,KAAK,CAAC,cAAc,CAAC;KAC7B,CAAC;AAEF,IAAO,qBAAMC,eAAa,GAA+C,UAAC,UAAsB,EAAE,iBAA2C;QAA3C,kCAAA;YAAA,2CAA2C;;QAC3I,IAAI,UAAU,CAAC,gBAAgB,EAAE;YAC/B,OAAO,UAAU,CAAC,gBAAgB,CAAC;SACpC;QACD,OAAO,iBAAiB,CAAC,UAAU,CAAC,CAAC;KACtC,CAAC;AAEF,yBAAa,0BAA0B,GAAuC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE;QAC5G,SAAS,aAAA;QACT,aAAa,iBAAA;KACd,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
